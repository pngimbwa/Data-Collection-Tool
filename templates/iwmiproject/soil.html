{% extends 'base.html' %}
{% load staticfiles %}
{% block title %}
    <title>Soil information</title>
{% endblock %}

{% block main_section %}
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">

<script>
  $(function() {
    $( "#id_date" ).datepicker({
		onSelect: function() {
        $('#soilpropertyform').formValidation('revalidateField', 'date');
    }
   })
  });
    
</script>

<form class="well form-horizontal" action=" " method="post"  id="soilpropertyform">{% csrf_token %} 

<!-- Form Name -->
<fieldset>
<legend>Soil property..</legend>

{% if user_village %}
<input type="hidden" id="uservillage" name="uservillage" value="{{user_village}}" readonly='readonly' />
{% elif researcher %}
<input type="hidden" id="researcher" name="researcher" value="{{researcher}}" readonly='readonly' />
{% elif user_country %}

{% endif %}
<label class="warning" for="message" id="message" align='center' style="color: red"><small><i>{{message}}</i></small></label>


<div class="form-group"> 
    {{ soilform.date.errors }}
    <label for="date" class="col-md-4 control-label">Date:</label>
        <div class="col-md-4 selectContainer">
      
        {{ soilform.date }}
        </div>
</div>

<div class="form-group"> 
    {{ soilform.farm.errors }}
    <label for="farm" class="col-md-4 control-label">Farm:</label>
        <div class="col-md-4 selectContainer">
        {{ soilform.farm }}
        </div>
</div>

<div class="form-group"> 
    {{ soilform.plot.errors }}
    <label for="plot" class="col-md-4 control-label">Plot:</label>
        <div class="col-md-4 selectContainer">
        {{ soilform.plot }}
        </div>
</div>


<div class="form-group"> 
    {{ soilform.soilclass.errors }}
    <label for="soilclass" class="col-md-4 control-label">Soil class:</label>
        <div class="col-md-4 selectContainer">
        {{ soilform.soilclass }}
        </div>
</div>

<div class="form-group"> 
    {{ soilform.soil_depth.errors }}
    <label for="soil_depth" class="col-md-4 control-label">Soil depth:</label>
        <div class="col-md-4 selectContainer">
          <div class="input-group">
        {{ soilform.soil_depth }}<span class="input-group-addon">cm</span>
          </div>
        </div>
</div>



<div class="form-group"> 
    {{ soilform.sand.errors }}
    <label for="sand" class="col-md-4 control-label">Sand:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.sand }}<span class="input-group-addon">%</span>
            </div>
        </div>
</div>          

<div class="form-group"> 
    {{ soilform.clay.errors }}
    <label for="clay" class="col-md-4 control-label">Clay:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.clay }}<span class="input-group-addon">%</span>
            </div>
        </div>
</div>

<div class="form-group"> 
    {{ soilform.silt.errors }}
    <label for="silt" class="col-md-4 control-label">Silt:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.silt }}<span class="input-group-addon">%</span>
            </div>
        </div>
</div>

<div class="form-group"> 
    {{ soilform.fc.errors }}
    <label for="fc" class="col-md-4 control-label">Field capacity:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.fc }}<span class="input-group-addon">%</span>
             </div>
        </div>
</div>


<div class="form-group"> 
    {{ soilform.pwp.errors }}
    <label for="pwp" class="col-md-4 control-label">Permanent wilting point:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.pwp }}<span class="input-group-addon">%</span>
             </div>
        </div>
</div>

<div class="form-group"> 
    {{ soilform.bulkdensity.errors }}
    <label for="bulkdensity" class="col-md-4 control-label">Bulk density:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.bulkdensity }}<span class="input-group-addon">g/cm<sup>3</sup></span>
             </div>
        </div>
</div>

<div class="form-group"> 
    {{ soilform.pH.errors }}
    <label for="pH" class="col-md-4 control-label">Soil pH:</label>
        <div class="col-md-4 selectContainer">
        {{ soilform.pH }}
        </div>
</div>

<div class="form-group"> 
    {{ soilform.ec.errors }}
    <label for="ec" class="col-md-4 control-label">EC:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.ec }}<span class="input-group-addon">dS/m</span>
            </div>
        </div>
</div>


<div class="form-group"> 
    {{ soilform.cec.errors }}
    <label for="cec" class="col-md-4 control-label">CEC:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
        {{ soilform.cec }}<span class="input-group-addon">cmo/kg</span>
            </div>
        </div>
</div>

<div class="form-group"> 
    {{ soilform.om.errors }}
    <label for="om" class="col-md-4 control-label">Organic matter:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.om }}<span class="input-group-addon">%</span>
            </div>
        </div>
</div>

<div class="form-group"> 
    {{ soilform.tn.errors }}
    <label for="date" class="col-md-4 control-label">Total nitrogen(TN):</label>
        <div class="col-md-4 selectContainer">
             <div class="input-group">
            {{ soilform.tn }}<span class="input-group-addon">%</span>
             </div>
        </div>
</div>

<div class="form-group"> 
    {{ soilform.av_p.errors }}
    <label for="av_p" class="col-md-4 control-label">Available phosphorus(Av_P):</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
           {{ soilform.av_p }}<span class="input-group-addon">ppm</span>
             </div>
        </div>
</div>


<div class="form-group"> 
    {{ soilform.fe.errors }}
    <label for="fe" class="col-md-4 control-label">Fe:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
           {{ soilform.fe }}<span class="input-group-addon">ppm</span>
             </div>
        </div>
</div>



<div class="form-group"> 
    {{ soilform.k.errors }}
    <label for="k" class="col-md-4 control-label">K:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.k }}<span class="input-group-addon">cmol/kg</span>
             </div>
        </div>
</div>

<div class="form-group"> 
    {{ soilform.zn.errors }}
    <label for="zn" class="col-md-4 control-label">Zn:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.zn }}<span class="input-group-addon">g/kg</span>
             </div>
        </div>
</div>

<div class="form-group"> 
    {{ soilform.se.errors }}
    <label for="se" class="col-md-4 control-label">Se:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.se }}<span class="input-group-addon">g/kg</span>
             </div>
        </div>
</div>

<div class="form-group"> 
    {{ soilform.ca.errors }}
    <label for="ca" class="col-md-4 control-label">Ca:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.ca }}<span class="input-group-addon">g/kg</span>
             </div>
        </div>
</div>

<div class="form-group"> 
    {{ soilform.s.errors }}
    <label for="s" class="col-md-4 control-label">S:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.s }}<span class="input-group-addon">g/kg</span>
            </div>
        </div>
</div>

<div class="form-group"> 
    {{ soilform.mg.errors }}
    <label for="mg" class="col-md-4 control-label">Mg:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.mg }}<span class="input-group-addon">g/kg</span>
            </div>
        </div>
</div>

<div class="form-group"> 
    {{ soilform.na.errors }}
    <label for="na" class="col-md-4 control-label">Na:</label>
        <div class="col-md-4 selectContainer">
            <div class="input-group">
            {{ soilform.na }}<span class="input-group-addon">g/kg</span>
            </div>
        </div>
</div>

</fieldset>
 <label for="message" style="color:#636363"><small>Note: If data is not available please enter -999 and not 0‚Äù</small></label>
<!-- Success message -->
<div class="alert alert-success" role="alert" id="success_message">Success <i class="glyphicon glyphicon-thumbs-up"></i> Thanks for contacting us, we will get back to you shortly.</div>

<!-- Button -->
<div class="form-group">
  <label class="col-md-4 control-label"></label>
  <div class="col-md-4">
    <button type="submit" class="btn btn-default" >Submit</button>
  </div>
</div>
</form>
    
    </div><!-- /.container -->
{% endblock %}

{% block extended_javascripts_code %}
	<script>
    $(document).ready(function () {
    $('#soilpropertyform').formValidation({
        framework: 'bootstrap',
        icon: {
            //valid: 'glyphicon glyphicon-ok',
            //invalid: 'glyphicon glyphicon-remove',
            validating: 'glyphicon glyphicon-refresh'
        },
        fields: {
            date: {
                validators: {
                    date: {
                            format: 'MM/DD/YYYY',
                            message: 'The date is not a valid'},
                    notEmpty: {
                        message: 'Please fill in date' }
                        }
                    },
                    
            farm: {
                validators: {
                    notEmpty: {
                        message: 'Please choose farm' }
                        }
                    },
            plot: {
                validators: {
                    notEmpty: {
                        message: 'Please select plot' }
                        }
                    },
            soilclass: {
                validators: {
                    notEmpty: {
                        message: 'Please choose soil type' }
                        }
                    },
            pH: {
                validators: {
                    numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                    notEmpty: {
                        message: 'Please fill soil pH' }
                        }
                    },
                    
            ec: {
                validators: {
                    numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                    notEmpty: {
                        message: 'Please fill soil ec' }
                        }
                    },
            sand : {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil sand %' }
                }
            },
            
            clay: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil clay %' }
                }
            },
            
            silt: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil silt %' }
                }
            },
            cec: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil cec amount' }
                }
            },
            soil_depth: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil depth' }
                }
            },
            om: {
                validators:{
                      numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil om amount' }
                }
            },
            tn: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil tn amount' }
                }
            },
            av_p: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil av_p' }
                }
            },
            fe: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil fe amount' }
                }
            },
            fc: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil fc amount' }
                }
            },
            pwp: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil pwp' }
                }
            },
            k: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil k amount' }
                }
            },
            bulkdensity: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil bulk density' }
                }
            },
            zn: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil zn amount' }
                }
            },
            se: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil se amount' }
                }
            },
            ca: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil ca amount' }
                }
            },
            s: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil s amount' }
                }
            },
            mg: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil mg amount' }
                }
            },
            na: {
                validators:{
                        numeric: {
                            message: 'The value is not a number',
                            thousandsSeparator: '',
                            decimalSeparator: '.'
                        },
                        notEmpty:{
                                message:'Please fill soil na amount' }
                }
            },

            
            
        }
    })
});
      //# sourceURL=pen.js

    </script>
    <script>
            if (document.location.search.match(/type=embed/gi)) {
                window.parent.postMessage("resize", "*");
                }
    </script>

<script>
$(document).ready(function() {
  $("#id_farm").change(function() {
    if ($(this).val() == '') {
      $("#id_plot").html("<option>Choose field..</option>");
      $("#id_plot").attr('disabled', true);
      }
      else {
        var url = "/plot/" + $(this).val() + "/plots";
        $.getJSON(url, function(plots) {
        var options = '<option value="">Choose plot..</option>';
        for (var i = 0; i < plots.length; i++) {
          options += '<option value="' + plots[i].pk + '">' + plots[i].fields['plotID']  + '</option>';
        }
        $("#id_plot").html(options);
        $("#id_plot option:first").attr('selected', 'selected');
        $("#id_plot").attr('disabled', false);
      });
    }
  });
});
</script>
<script>
$(window).load(function() {
  if (typeof $('#uservillage').val() === "undefined"){
    var url = "/select_all/";
    $.getJSON(url, function(farmers) {
    var options = '<option value="">Choose Field..</option>';
      for (var i = 0; i < farmers.length; i++) {
        options += '<option value="' + farmers[i].pk + '">' + farmers[i].fields['firstname'] + ' ' + farmers[i].fields['middlename'] + ' ' + farmers[i].fields['lastname'] + '</option>';
          }
          $("#id_farm").html(options);
          $("#id_farm option:selected").attr('selected', 'selected');
      });
    }
    else if (typeof $('#researcher').val() === "undefined"){
    var village = $('#uservillage').val();
    var url = "/farmer/" + village + "/farmers";
    $.getJSON(url, function(farmers) {
    var options = '<option value="">Choose Field..</option>';
      for (var i = 0; i < farmers.length; i++) {
        options += '<option value="' + farmers[i].pk + '">' + farmers[i].fields['firstname'] + ' ' + farmers[i].fields['middlename'] + ' ' + farmers[i].fields['lastname'] + '</option>';
          }
          $("#id_farm").html(options);
          $("#id_farm option:selected").attr('selected', 'selected');
      });
    }
});
</script>
{% endblock %}